<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Build a Library</title>
  </head>
  <body>
    <script>
      class Media {
        constructor(title) {
          this._title = title;
          this._isCheckedOut = false;
          this._ratings = [];
        }

        get title() {
          return this._title;
        }
        get isCheckedOut() {
          return this._isCheckedOut;
        }
        get ratings() {
          return this._ratings;
        }

        // rivedere i setter
        set isCheckedOut(value) {
          this._isCheckedOut = value;
        }

        toggleCheckOutStatus() {
          this.isCheckedOut = !this.isCheckedOut;
        }

        getAverageRating() {
          let ratingSum = this.ratings.reduce(
            (currentSum, rating) => currentSum + rating,
            0
          );
          const lengthOfArray = this.ratings.length;
          return ratingSum / lengthOfArray;
        }

        addRating(newRating) {
          newRating > 0 && newRating < 6
            ? this.ratings.push(newRating)
            : console.log(
                `${newRating} is an invalid number. Please insert a number between 1 and 6`
              );
        }
      }

      class Book extends Media {
        constructor(author, title, pages) {
          super(title);
          this._author = author;
          this._pages = pages;
        }

        get authors() {
          return this._author;
        }
        get pages() {
          return this._pages;
        }
      }

      class Movie extends Media {
        constructor(director, title, runTime) {
          super(title);
          this._director = director;
          this._runTime = runTime;
        }

        get director() {
          return this._director;
        }

        get runTime() {
          return this._runTime;
        }
      }

      class CD extends Media {
        constructor(artist, title, songs) {
          super(title);
          this._artist = artist;
          this._songs = songs;
        }

        get artist() {
          return this._artist;
        }
        get songs() {
          return this._songs;
        }

        // completare
        shuffle() {}
      }

      // completare
      class Catalog extends Media {
        constructor(title, year, productor, notes) {
          super(title);
          this._year = year;
          this._productor = productor;
          this._notes = notes;
        }

        get year() {
          return this._year;
        }
        get productor() {
          return this._productor;
        }
        get notes() {
          return this._notes;
        }
      }

      const historyOfEverything = new Book(
        'Billy Bryson',
        'A Short History of Nearly Everything',
        544
      );
      historyOfEverything.toggleCheckOutStatus();
      console.log(historyOfEverything.isCheckedOut);
      historyOfEverything.addRating(4);
      historyOfEverything.addRating(5);
      historyOfEverything.addRating(5);
      console.log(historyOfEverything);
      console.log(historyOfEverything.getAverageRating());

      const speed = new Movie('Jan de Bont', 'Speed', 116);
      speed.toggleCheckOutStatus();
      console.log(speed.isCheckedOut);
      speed.addRating(1);
      speed.addRating(1);
      speed.addRating(5);
      console.log(speed);
      console.log(speed.getAverageRating());

      const nevermind = new CD('Nirvana', 'Nevermind', [
        'Smells Like Teen Spirit',
        'In Bloom',
        'Come As You Are',
        'Something In the Way',
      ]);
      nevermind.toggleCheckOutStatus();
      console.log(nevermind.isCheckedOut);
      nevermind.addRating(5);
      nevermind.addRating(4);
      nevermind.addRating(5);
      console.log(nevermind);
      console.log(nevermind.getAverageRating());

      speed.addRating(0);

      for (let i = 0; i < nevermind.songs.length; i++) {
        let randomIndex = Math.floor(Math.random() * nevermind.songs.length);
        nevermind.songs[i] = randomIndex;
        if (randomIndex) {
          randomIndex;
        }
      }
      console.log(nevermind.songs.sort());

      console.log(new Catalog());

      // console.log(nevermind.songs)
    </script>
  </body>
</html>
