<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>L16: Lavorare con JSON</title>
  </head>
  <body>
    <script>
      // 1. Cosa è un JSON?
      // (JavaScript Object Notation)
      // è uno standard basato sul testo per il passaggio dei dati
      // struttura di dati basata sulla sintassi degli oggetti di JS
      // (modo di passare i dati molto simile agli oggetti di JS)

      // 2. Struttura
      // 3. Array come JSON
      // classe: è una enorme {}. Ha la struttura di un oggetto
      // classi: più oggetti incapsulati in un array
      // struttura simile a quella degli oggetti

      // 4. Note: JSON è una stringa di dati con solo proprietà e metodi
      // 5. Note: le stringhe sono necessariamente contenute in double quotes ""
      // 6. Note: a differenza degli oggetti JS le proprietà vanno contenute in ""
      // 7. Note: JSON può contenere array, obj, string, number
      // 8. Otteniamo un JSON

      // aggiunta di un JSON
      let requestURL = '../JS/classe.json'; // percorso del file. Potrebbe essere locale o online
      let request = new XMLHttpRequest(); // standard. Essendoci il new si tratta di un oggetto che viene creato attraverso quel metodo
      request.open('GET', requestURL); // apriamo l'oggetto request, e diciamo di usare il metodo GET di requestURL
      request.responseType = 'json'; // diamo il response type per l'oggetto request
      request.send(); // mandiamo
      // a questo punto dobbiamo aspettare che ritorni indietro il file

      // onload è l'evento. Quando viene caricata la request mi fai la funzione anonima direttamente
      // crei la costante classe = alla risposta della richiesta
      // in console vedo un oggetto
      // ci lavoro come se avessi a che fare con un oggetto
      request.onload = function () {
        const classe = request.response;
        console.log(classe);
        console.log(classe.insegnanti[1].cognome);
        console.log(classe.alunni[1].nome);
      };
    </script>
  </body>
</html>
